{"version":3,"file":"shaker-plugin.test.js","names":["join","transformSync","dedent","hasEvaluatorMetadata","shakerPlugin","getPresets","extension","presets","push","require","resolve","keep","only","code","filename","__dirname","formattedCode","transformed","babelrc","configFile","plugins","onlyExports","metadata","Error","linariaEvaluator","describe","it","expect","toMatchSnapshot","imports","size","toBe","toMatchInlineSnapshot","get","toEqual","keys"],"sources":["../../../src/plugins/__tests__/shaker-plugin.test.ts"],"sourcesContent":["import { join } from 'path';\n\nimport type { PluginItem } from '@babel/core';\nimport { transformSync } from '@babel/core';\nimport dedent from 'dedent';\n\nimport { hasEvaluatorMetadata } from '@linaria/utils';\n\nimport shakerPlugin from '../shaker-plugin';\n\ntype Extension = 'js' | 'ts' | 'jsx' | 'tsx';\n\nconst getPresets = (extension: Extension) => {\n  const presets: PluginItem[] = [];\n  if (extension === 'ts' || extension === 'tsx') {\n    presets.push(require.resolve('@babel/preset-typescript'));\n  }\n\n  if (extension === 'jsx' || extension === 'tsx') {\n    presets.push(require.resolve('@babel/preset-react'));\n  }\n\n  return presets;\n};\n\nconst keep =\n  (only: string[], extension: Extension = 'js') =>\n  (code: TemplateStringsArray) => {\n    const presets = getPresets(extension);\n    const filename = join(__dirname, `source.${extension}`);\n    const formattedCode = dedent(code);\n\n    const transformed = transformSync(formattedCode, {\n      babelrc: false,\n      configFile: false,\n      filename,\n      presets,\n      plugins: [\n        [\n          shakerPlugin,\n          {\n            onlyExports: only,\n          },\n        ],\n      ],\n    });\n\n    if (\n      !transformed ||\n      !transformed.code ||\n      !hasEvaluatorMetadata(transformed.metadata)\n    ) {\n      throw new Error(`${filename} has no shaker metadata`);\n    }\n\n    return {\n      code: transformed.code,\n      metadata: transformed.metadata.linariaEvaluator,\n    };\n  };\n\ndescribe('shaker', () => {\n  it('should remove unused export', () => {\n    const { code, metadata } = keep(['a'])`\n      export const a = 1;\n      export const b = 2;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should remove related code', () => {\n    const { code, metadata } = keep(['a'])`\n      const a = 1;\n      const b = 2;\n      export { a, b };\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should process array patterns', () => {\n    const { code, metadata } = keep(['c'])`\n      const [a, b, c] = array;\n      const [,,, d, e] = array;\n\n      export { a, b, c, d, e};\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should process object patterns', () => {\n    const { code, metadata } = keep(['b1'])`\n      const { a: a1, b: b1, c: c1 } = obj;\n      const { d: d1, e: e1 } = obj;\n\n      export { a1, b1, c1, d1, e1 };\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should process transpiled enums', () => {\n    const { code, metadata } = keep(['defaultValue'])`\n      exports.Kind = void 0;\n\n      var Kind;\n      (function (Kind) {\n        Kind[\"DEFAULT\"] = \"default\";\n        Kind[\"TRANSPARENT\"] = \"transparent\";\n        Kind[\"RED\"] = \"red\";\n        Kind[\"BLACK\"] = \"black\";\n      })(Kind = exports.Kind || (exports.Kind = {}));\n\n      export const defaultValue = Kind.DEFAULT;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should keep referenced exports', () => {\n    const { code, metadata } = keep(['defaultValue'])`\n      exports.foo = 10;\n\n      exports.defaultValue = Math.random() * exports.foo;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should throw out unused referenced exports', () => {\n    const { code, metadata } = keep(['defaultValue'])`\n      exports.foo = 10;\n\n      exports.bar = Math.random() * exports.foo;\n\n      exports.defaultValue = 20;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should remove all references of `a`', () => {\n    const { code, metadata } = keep(['b'])`\n      let a = 1;\n\n      a = 2;\n\n      exports.a = a;\n      exports.b = 10;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should respect implicit references', () => {\n    const { code, metadata } = keep(['a'])`\n      let _a;\n      exports.a = _a = {};\n      exports.b = _a;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should keep assigment even if export is marked for removing', () => {\n    const { code, metadata } = keep(['b'])`\n      let _a;\n      exports.a = _a = {};\n      exports.b = _a;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should process identifiers in void expressions as references', () => {\n    const { code, metadata } = keep(['b'])`\n      let _;\n\n      const a = void _;\n\n      function b(b) {\n        void _;\n      }\n\n      exports.a = a;\n      exports.b = b;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should delete import', () => {\n    const { code, metadata } = keep(['Alive'])`\n      import { A, B } from \"ABC\";\n      const AB = {\n        A,\n        B,\n      };\n\n      export const Alive = \"\";\n\n      export default AB;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should handle object patterns in exports', () => {\n    const { code } = keep(['Alive'])`\n      import foo from \"foo\";\n\n      export const { Alive, Dead } = foo();\n    `;\n\n    expect(code).toMatchInlineSnapshot(`\n      \"import foo from \\\\\"foo\\\\\";\n      export const {\n        Alive,\n        Dead\n      } = foo();\"\n    `);\n  });\n\n  it('avoids deleting non-default exports when importing default export of a module without an __esModule: true property', () => {\n    /* without workaround, this will be transformed by shaker to:\n      const n = require('n');\n      const defaultExports = {\n        createContext: n.createContext\n      };\n      exports.default = defaultExports;\n\n      i.e, exports.createContext is deleted\n    */\n    const { code } = keep(['default'])`\n    const n = require('n');\n    const defaultExports = { createContext: n.createContext }\n    Object.defineProperty(exports, \"createContext\", {\n      enumerable: !0,\n      get: function() {\n          return n.createContext\n      }\n    })\n    exports.default = defaultExports;\n    `;\n\n    /*\n      this breaks babel's interopRequireDefault\n      without shaker, interopRequireDefault(<the test module>)\n      returns: {\n        default: {\n          default: { createContext: ... }\n          createContext: ...\n        }\n      }\n      The double-default is because the module does not define\n      __esModule: true, so interopRequireDefault assumes that it needs to wrap the exports in { default: ... }, so that subsequent code can access createContext via `<test module>.default.createContext`.\n\n      If shaker treats the createExport named export as unused (since it's not in onlyExports), it will delete it. interopRequireDefault(<shaker-processed test module>)\n      returns: {\n        default: {\n          default: { createContext: ... }\n        }\n      }\n\n      And `<test module>.default.createContext` will be undefined.\n\n      Therefore, we assert that createContext is not deleted in this case.\n    */\n    expect(code).toMatchInlineSnapshot(`\n      \"const n = require('n');\n      const defaultExports = {\n        createContext: n.createContext\n      };\n      Object.defineProperty(exports, \\\\\"createContext\\\\\", {\n        enumerable: !0,\n        get: function () {\n          return n.createContext;\n        }\n      });\n      exports.default = defaultExports;\"\n    `);\n  });\n\n  it('deletes non-default exports when importing default export of a module with an __esModule: true property', () => {\n    /* without workaround, this will be transformed by shaker to:\n      const n = require('n');\n      const defaultExports = {\n        createContext: n.createContext\n      };\n      exports.default = defaultExports;\n\n      i.e, exports.createContext is deleted\n    */\n    const { code } = keep(['default'])`\n    const n = require('n');\n    const defaultExports = { createContext: n.createContext }\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n    Object.defineProperty(exports, \"createContext\", {\n      enumerable: !0,\n      get: function() {\n          return n.createContext\n      }\n    })\n    exports.default = defaultExports;\n    `;\n\n    expect(code).toMatchInlineSnapshot(`\n      \"const n = require('n');\n      const defaultExports = {\n        createContext: n.createContext\n      };\n      Object.defineProperty(exports, \\\\\"__esModule\\\\\", {\n        value: true\n      });\n      Object.defineProperty(exports, \\\\\"createContext\\\\\", {\n        enumerable: !0,\n        get: function () {}\n      });\n      exports.default = defaultExports;\"\n    `);\n  });\n\n  it('should remove asset imports', () => {\n    const { code, metadata } = keep(['a'])`\n      import './asset.css';\n\n      export const a = 1;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should keep side-effects from modules', () => {\n    const { code, metadata } = keep(['a'])`\n      import 'regenerator-runtime/runtime.js';\n\n      export const a = 1;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(1);\n  });\n\n  it('should keep only side-effects', () => {\n    const { code, metadata } = keep(['side-effect'])`\n      import 'regenerator-runtime/runtime.js';\n\n      export const a = 1;\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(1);\n  });\n\n  it('should handle __importDefault', () => {\n    const { code, metadata } = keep(['Input'])`\n      var __importDefault =\n        (this && this.__importDefault) ||\n        function (mod) {\n          return mod && mod.__esModule ? mod : { default: mod };\n        };\n      Object.defineProperty(exports, '__esModule', { value: true });\n\n      var Input_1 = require('./Input');\n      Object.defineProperty(exports, 'Input', {\n        enumerable: true,\n        get: function () {\n          return __importDefault(Input_1).default;\n        },\n      });\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(1);\n    expect(metadata.imports.get('./Input')).toEqual(['default']);\n  });\n\n  it('should shake if __linariaPreval required but not exported', () => {\n    const { code, metadata } = keep(['__linariaPreval', 'Input'])`\n      import 'regenerator-runtime/runtime.js';\n\n      export { Button } from \"./Button\";\n      export { Input } from \"./Input\";\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(2);\n    expect([...metadata.imports.keys()]).toEqual([\n      'regenerator-runtime/runtime.js',\n      './Input',\n    ]);\n  });\n\n  it('should keep setBatch', () => {\n    // A real-world example from react-redux\n    const { code, metadata } = keep(['setBatch'])`\n      function defaultNoopBatch(callback) {\n        callback();\n      }\n\n      var batch = defaultNoopBatch;\n\n      export var setBatch = function setBatch(newBatch) {\n        return (batch = newBatch);\n      };\n\n      export var getBatch = function getBatch() {\n        return batch;\n      };\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n\n  it('should process constant violations inside binding paths', () => {\n    // Function `a` should be removed because it's only used in removed function `b`\n    const { code, metadata } = keep(['c'])`\n      function a(flag) { return (a = function(flag) { flag ? 1 : 2 }) }\n      export function b() { return a(1) }\n      export function c() {};\n    `;\n\n    expect(code).toMatchSnapshot();\n    expect(metadata.imports.size).toBe(0);\n  });\n});\n"],"mappings":"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"}